<div class="card" *ngIf="loadingSig()">
  <div class="card__header">
    <div class="card__title">Carregando...</div>
  </div>
</div>

<div class="card" *ngIf="!loadingSig() && errorSig() as err">
  <div class="card__header">
    <div class="card__title">Erro</div>
  </div>
  <div class="error">{{ err }}</div>
  <button class="btn btn--secondary" type="button" (click)="next()">Voltar</button>
</div>

<div class="card" *ngIf="!loadingSig() && questionSig() as q">
  <div class="card__header">
    <div class="card__title">Questão</div>
  </div>
  <div class="statement">{{ q.statement }}</div>

  <hr class="hr" />

  <div class="options">
    <label class="option" *ngFor="let opt of q.options">
      <input
        type="radio"
        name="opt"
        [value]="opt.id"
        [checked]="selectedOptionIdSig() === opt.id"
        (change)="selectedOptionIdSig.set(opt.id)"
        [disabled]="submittingSig() || !!feedbackSig()"
      />
      <span>{{ opt.text }}</span>
    </label>
  </div>

  <div class="actions">
    <button
      class="btn btn--primary"
      type="button"
      [disabled]="!selectedOptionIdSig() || submittingSig() || feedbackSig()"
      (click)="submit()"
    >
      {{ submittingSig() ? 'Enviando...' : 'Enviar' }}
    </button>
    <button
      *ngIf="feedbackSig()"
      class="btn btn--secondary"
      type="button"
      (click)="next()"
    >
      Próxima
    </button>
  </div>

  <hr class="hr" *ngIf="feedbackSig()" />

  <div *ngIf="feedbackSig() as fb" class="feedback">
    <div class="feedback__row">
      <span class="tag" [class.tag--success]="fb.isCorrect" [class.tag--danger]="!fb.isCorrect">
        {{ fb.isCorrect ? 'Correto' : 'Incorreto' }}
      </span>
      <div class="muted">Correct option: <span class="mono">{{ fb.correctOptionId }}</span></div>
    </div>

    <div class="explanation">
      <div class="muted">Explicação</div>
      <div>{{ fb.explanationText }}</div>
    </div>
  </div>
</div>


